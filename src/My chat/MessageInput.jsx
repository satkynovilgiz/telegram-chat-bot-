import React, { useState } from 'react'; // –ú—ã –ø–æ–¥–∫–ª—é—á–∞–µ–º React –∏ —Ö—É–∫ useState, —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª—è—Ö).
import axios from 'axios'; // –ú—ã –ø–æ–¥–∫–ª—é—á–∞–µ–º axios, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ, –≤ Telegram).
import './MessageInput.css'; // –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å—Ç–∏–ª–∏, —á—Ç–æ–±—ã —Ñ–æ—Ä–º–∞ –≤—ã–≥–ª—è–¥–µ–ª–∞ –∫—Ä–∞—Å–∏–≤–æ.

const MessageInput = () => { // –ú—ã —Å–æ–∑–¥–∞—ë–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –Ω–∞—à—É —Ñ–æ—Ä–º—É.
  
  // –ó–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ) –∏ –æ—à–∏–±–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è.
  const [phone, setPhone] = useState(''); // –≠—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –≤–≤—ë–ª.
  const [fullName, setFullName] = useState(''); // –≠—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –∏–º—è, –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –≤–≤—ë–ª.
  const [description, setDescription] = useState(''); // –≠—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –≤–≤—ë–ª.
  const [errors, setErrors] = useState({ phone: '', fullName: '', description: '' }); // –≠—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –æ—à–∏–±–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ").

  const token = '8043384380:AAE86grub5pqt1iG5cwN3z3JzH8PmR6X22Q'; // –≠—Ç–æ –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞—à–µ–º—É –±–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.
  const chatId = '7983961143'; // –≠—Ç–æ ID —á–∞—Ç–∞, –∫—É–¥–∞ –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram.
  const sendMessage = async (message) => {
    try {
      const response = await axios.post( // –ú—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ axios.
        `https://api.telegram.org/bot${token}/sendMessage`, // –°—Å—ã–ª–∫–∞ –Ω–∞ API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram.
        {
          chat_id: chatId, // –ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞—à —á–∞—Ç).
          text: message, // –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º.
        
        }
      );
      console.log('Message sent successfully', response.data); // –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.
    } catch (error) {
      console.error('Error sending message', error.response || error.message); // –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞, –º—ã –µ—ë –≤—ã–≤–æ–¥–∏–º.
    }
  };

  // –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ —Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å —Ñ–æ—Ä–º—É.
  const handleSubmit = (event) => {
    event.preventDefault(); // –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã.

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ–π.
    const newErrors = {
      phone: phone.trim() ? '' : '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ', // –ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É.
      fullName: fullName.trim() ? '' : '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ', // –¢–æ –∂–µ –¥–ª—è –∏–º–µ–Ω–∏.
      description: description.trim() ? '' : '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ', // –¢–æ –∂–µ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è.
    };

    setErrors(newErrors); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—à–∏–±–∫–∏.

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏.
    const hasErrors = Object.values(newErrors).some((error) => error !== ''); 
    if (hasErrors) return; // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ.

    // –ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç, —Å–æ–∑–¥–∞—ë–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.
    const composedMessage = `üìû Phone: ${phone}\nüë§ Name: ${fullName}\nüìù Description:\n${description}`;

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ.
    sendMessage(composedMessage);

    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏.
    setPhone('');
    setFullName('');
    setDescription('');
    setErrors({ phone: '', fullName: '', description: '' }); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏.
  };

  return (
    <div className="MessageInput"> {/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ–π —Ñ–æ—Ä–º—ã */}
      <form onSubmit={handleSubmit} onKeyDown={(e)=>{
        if (e.key ==='Enter'){
          handleSubmit(e)
        }
      }}> {/* –§–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö */}
        <div className="input-group"> {/* –ì—Ä—É–ø–ø–∞ –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */}
          <input
            type="number" // –¢–∏–ø –ø–æ–ª—è: —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞.
            value={phone} // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è ‚Äî —ç—Ç–æ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
            onChange={(e) => setPhone(e.target.value)} // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª—è –æ–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
            placeholder="Phone number" // –ü–æ–¥—Å–∫–∞–∑–∫–∞, —á—Ç–æ —Å—é–¥–∞ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
          />
          {errors.phone && <div className="error">{errors.phone}</div>} {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –µ—Å—Ç—å */}
        </div>

        <div className="input-group"> {/* –ì—Ä—É–ø–ø–∞ –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏ */}
          <input
            type="text" // –¢–∏–ø –ø–æ–ª—è: —Ç–µ–∫—Å—Ç.
            value={fullName} // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è ‚Äî —ç—Ç–æ –∏–º—è.
            onChange={(e) => setFullName(e.target.value)} // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª—è –æ–±–Ω–æ–≤–ª—è–µ–º –∏–º—è.
            placeholder="Full name" // –ü–æ–¥—Å–∫–∞–∑–∫–∞, —á—Ç–æ —Å—é–¥–∞ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –∏–º—è.
          />
          {errors.fullName && <div className="error">{errors.fullName}</div>} {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –µ—Å—Ç—å */}
        </div>

        <div className="input-group"> {/* –ì—Ä—É–ø–ø–∞ –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞ –æ–ø–∏—Å–∞–Ω–∏—è */}
          <textarea
            value={description} // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è ‚Äî —ç—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ.
            onChange={(e) => setDescription(e.target.value)} // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª—è –æ–±–Ω–æ–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ.
            placeholder="Description" // –ü–æ–¥—Å–∫–∞–∑–∫–∞, —á—Ç–æ —Å—é–¥–∞ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ.
            rows={4} // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫.
          />
          {errors.description && <div className="error">{errors.description}</div>} {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –µ—Å—Ç—å */}
        </div>

        <button type="submit">Send Message</button> {/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã */}
      </form>
    </div>
  );
};

export default MessageInput; // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —á—Ç–æ–±—ã –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
